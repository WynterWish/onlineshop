<!doctype html>
<html>
<head><meta charset="utf-8"><title>管理员注册</title></head>
<body>
  <div id="topnav" style="background:#f5f5f5;padding:8px;border-bottom:1px solid #ddd;">
    <a href="/">登录</a>
  </div>

  <h2>管理员注册</h2>
  <form id="form">
    管理员用户名: <input name="username" required><br>
    密码: <input type="password" name="password" required><br>
    <button>注册</button>
  </form>
<script>
document.getElementById('form').onsubmit = async (e) => {
  e.preventDefault();
  const data = Object.fromEntries(new FormData(e.target));
  const res = await fetch('/api/auth/register-admin', {
    method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(data)
  });
  if (res.ok) {
    alert('注册成功，跳转到管理员登录');
    location.href = '/?mode=admin';
  } else {
    const j = await res.json().catch(()=>null);
    alert((j && j.error) || '注册失败');
  }
};
</script>
</body>
</html>