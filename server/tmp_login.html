<!doctype html><html><head><meta charset="utf-8"><title>å•†å“åˆ—è¡¨</title></head>
<body>
<div style="text-align:right;padding:8px"><a href="/cart.html">è´­ç‰©è½¦ ğŸ›’</a></div>
<h2>å•†å“åˆ—è¡¨</h2>
<div id="list"></div>
<script>
fetch('http://localhost:5000/api/products')
  .then(r => r.json())
  .then(arr => {
    document.getElementById('list').innerHTML = arr.map(p => `
      <div>${p.name} ï¿¥${p.price} åº“å­˜${p.stock}
        <button onclick="add(${p.id})">åŠ è´­ç‰©è½¦</button>
      </div>`).join('');
  });
async function add(id) {
  const token = localStorage.getItem('token');
  if (!token) return alert('è¯·å…ˆç™»å½•');
  await fetch('http://localhost:5000/api/cart', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json', 'Authorization': 'Bearer ' + token },
    body: JSON.stringify({ productId: id, quantity: 1 })
  });
  alert('å·²åŠ å…¥è´­ç‰©è½¦');
}
</script>
</body></html>